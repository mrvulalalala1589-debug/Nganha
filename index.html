<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Mini Galaxy Universe</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{margin:0;overflow:hidden;background:#000}
#hint{
  position:fixed;top:10px;left:50%;
  transform:translateX(-50%);
  color:#7ff;font-size:14px;
  z-index:10;opacity:.8
}
</style>
</head>
<body>
<div id="hint">ðŸŒ€ KÃ©o Ä‘á»ƒ xoay â€“ Cuá»™n Ä‘á»ƒ zoom</div>

<script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
<script src="https://unpkg.com/three@0.160.0/examples/js/controls/OrbitControls.js"></script>

<script>
/* ================= SCENE ================= */
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x000010);
scene.fog = new THREE.FogExp2(0x000010,0.0005);

const camera = new THREE.PerspectiveCamera(60,innerWidth/innerHeight,0.1,2000);
camera.position.set(0,80,260);

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth,innerHeight);
renderer.setPixelRatio(Math.min(devicePixelRatio,2));
document.body.appendChild(renderer.domElement);

/* ================= CONTROLS ================= */
const controls = new THREE.OrbitControls(camera,renderer.domElement);
controls.enableDamping = true;
controls.minDistance = 80;
controls.maxDistance = 600;

/* ================= LIGHT ================= */
scene.add(new THREE.AmbientLight(0x8899ff,.4));
const coreLight = new THREE.PointLight(0xffffff,2,800);
scene.add(coreLight);

/* ================= STAR TEXTURE ================= */
function starTexture(){
  const c=document.createElement('canvas');
  c.width=c.height=64;
  const g=c.getContext('2d').createRadialGradient(32,32,0,32,32,32);
  g.addColorStop(0,'#fff');
  g.addColorStop(.3,'rgba(180,200,255,.8)');
  g.addColorStop(1,'rgba(0,0,0,0)');
  const ctx=c.getContext('2d');
  ctx.fillStyle=g;ctx.fillRect(0,0,64,64);
  return new THREE.CanvasTexture(c);
}

/* ================= GALAXY ================= */
const stars = 14000;
const geo = new THREE.BufferGeometry();
const pos = new Float32Array(stars*3);
const col = new Float32Array(stars*3);
for(let i=0;i<stars;i++){
  const r=Math.pow(Math.random(),0.35)*450;
  const a=r*0.015 + Math.random()*Math.PI*2;
  pos[i*3]=Math.cos(a)*r;
  pos[i*3+1]=(Math.random()-.5)*30;
  pos[i*3+2]=Math.sin(a)*r;
  col[i*3]=0.6; col[i*3+1]=0.7; col[i*3+2]=1;
}
geo.setAttribute('position',new THREE.BufferAttribute(pos,3));
geo.setAttribute('color',new THREE.BufferAttribute(col,3));

const galaxy = new THREE.Points(
  geo,
  new THREE.PointsMaterial({
    size:2.8,
    map:starTexture(),
    transparent:true,
    depthWrite:false,
    vertexColors:true,
    blending:THREE.AdditiveBlending
  })
);
scene.add(galaxy);

/* ================= IMAGES ================= */
const loader = new THREE.TextureLoader();
const images=[];
for(let i=1;i<=10;i++){
  loader.load(`space${i}.png`, tex=>{
    const m=new THREE.MeshStandardMaterial({map:tex,transparent:true});
    const p=new THREE.Mesh(new THREE.PlaneGeometry(38,38),m);
    p.userData={a:Math.random()*Math.PI*2,r:120+Math.random()*120,s:.0004+Math.random()*.0006};
    scene.add(p);images.push(p);
  });
}

/* ================= ANIMATE ================= */
function animate(){
  requestAnimationFrame(animate);
  galaxy.rotation.y+=0.0004;
  images.forEach(p=>{
    p.userData.a+=p.userData.s;
    p.position.set(
      Math.cos(p.userData.a)*p.userData.r,
      Math.sin(p.userData.a*2)*18,
      Math.sin(p.userData.a)*p.userData.r
    );
    p.lookAt(camera.position);
  });
  controls.update();
  renderer.render(scene,camera);
}
animate();

/* ================= RESIZE ================= */
addEventListener('resize',()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
</script>
</body>
</html>
